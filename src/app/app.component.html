<a class="visually-hidden-focusable" href="#content">{{ 'skip_to_content' | transloco }}</a>
<app-header id="header" class="navbar navbar-inverse fixed-top"></app-header>
<app-control-bar />

@if (
  (queueStore.sourceTopChartsId() || queueStore.sourcePlaylistId()) && !isRedirectingToCurrentUrl()
) {
  <a
    class="back-to-playlist-banner"
    [attr.aria-label]="'back_current_playlist' | transloco"
    [routerLink]="
      queueStore.sourceTopChartsId()
        ? ['top', queueStore.sourceTopChartsId()]
        : ['playlist', queueStore.sourcePlaylistId()]
    "
  >
    <span class="material-icons" aria-hidden="true">play_circle</span>
    {{ 'back_current_playlist' | transloco }}
    <span class="material-icons" aria-hidden="true">chevron_right</span>
  </a>
}

<div id="main" class="container-fluid">
  <div id="container" class="row">
    <app-player
      class="col-3 col-md-3"
      id="player-sidebar"
      role="complementary"
      [attr.aria-label]="'play_list' | transloco"
    ></app-player>

    <div class="col-9 col-md-9" id="content">
      <router-outlet></router-outlet>
    </div>
  </div>
</div>

<app-toast-container></app-toast-container>

@if (!isOnline()) {
  <ngb-alert id="alert-connection-lost" (close)="isOnline.set(true)" type="danger">
    {{ 'perte_connexion' | transloco }}
  </ngb-alert>
}
@if (uiStore.showSessionExpiredMessage()) {
  <ngb-alert id="alert-logout" (close)="uiStore.hideSessionExpired()" type="danger">
    {{ 'veuillez_vous_reconnecter' | transloco }}
  </ngb-alert>
}
@if (playerStore.errorMessage()) {
  <ngb-alert id="alert-error" class="d-lg-none" (close)="clearErrorMessage()" type="danger">
    {{ playerStore.errorMessage() | transloco }}
  </ngb-alert>
}
<ng-template #contentModalReload let-modal>
  <div class="modal-header">
    <h4 class="modal-title">
      <span class="material-icons" aria-hidden="true">error_outline</span>
      {{ 'erreur' | transloco }}
    </h4>
    <button
      type="button"
      class="btn-close"
      aria-label="Close"
      (click)="modal.dismiss('Cross click')"
    ></button>
  </div>
  <div class="modal-body">
    <div class="modal-alert modal-alert-danger">
      <span class="material-icons" aria-hidden="true">cloud_off</span>
      <span>{{ 'reload_label' | transloco }}</span>
    </div>

    <div class="modal-actions">
      <button class="btn btn-primary" (click)="reload()">
        <span class="material-icons" aria-hidden="true">refresh</span>
        {{ 'reload_button' | transloco }}
      </button>
    </div>
  </div>
</ng-template>
