<div class="page-container">
  <header class="page-header">
    <h1>
      <span class="material-icons" aria-hidden="true">lock_reset</span>
      {{ 'reset_password_title' | transloco }}
    </h1>
  </header>

  @if (formSuccess()) {
  <div class="reset-success" role="status">
    <div class="reset-success-icon">
      <span class="material-icons" aria-hidden="true">check_circle</span>
    </div>
    <h2 class="reset-success-title">{{ 'reset_password_success_title' | transloco }}</h2>
    <p class="reset-success-message">{{ 'reset_password_success' | transloco }}</p>
    <a class="btn btn-primary" routerLink="/">
      <span class="material-icons" aria-hidden="true">home</span>
      {{ 'reset_password_back_home' | transloco }}
    </a>
  </div>
  } @else {
  <div class="modal-alert modal-alert-info reset-hint">
    <span class="material-icons" aria-hidden="true">info</span>
    <span>{{ 'reset_password_hint' | transloco }}</span>
  </div>

  <section class="reset-section">
    <form (submit)="onSubmit($event)" class="reset-form">
      <div class="form-group">
        <label class="form-label" for="password">
          <span class="material-icons" aria-hidden="true">lock</span>
          {{ 'reset_password_new_pass' | transloco }}
        </label>
        <input
          type="password"
          id="password"
          class="form-control"
          [formField]="resetForm.password"
          [class.is-invalid]="submitted() && resetForm.password().invalid()"
          autocomplete="new-password"
        />
        @if (submitted() && resetForm.password().invalid()) {
        <div class="invalid-feedback">
          @for (error of resetForm.password().errors(); track error.kind) {
          <div>{{ error.message }}</div>
          }
        </div>
        }
      </div>

      <div class="form-group">
        <label class="form-label" for="confirmPassword">
          <span class="material-icons" aria-hidden="true">lock_clock</span>
          {{ 'reset_password_pass_confirm' | transloco }}
        </label>
        <input
          type="password"
          id="confirmPassword"
          class="form-control"
          [formField]="resetForm.confirmPassword"
          [class.is-invalid]="submitted() && resetForm.confirmPassword().invalid()"
          autocomplete="new-password"
        />
        @if (submitted() && resetForm.confirmPassword().invalid()) {
        <div class="invalid-feedback">
          @for (error of resetForm.confirmPassword().errors(); track error.kind) {
          <div>{{ error.message }}</div>
          }
        </div>
        }
      </div>

      <button class="btn btn-primary" type="submit" [disabled]="loading()">
        @if (loading()) {
        <span class="spinner-border spinner-border-sm me-1" role="status">
          <span class="visually-hidden">Loading...</span>
        </span>
        }
        <span class="material-icons" aria-hidden="true">vpn_key</span>
        {{ 'reset_password_action' | transloco }}
      </button>
    </form>
  </section>

  @if (formInvalid()) {
  <div class="alert alert-danger mt-3 d-flex align-items-center gap-2" role="alert">
    <span class="material-icons" aria-hidden="true">error_outline</span>
    {{ 'reset_password_invalid' | transloco }}
  </div>
  } }
</div>
